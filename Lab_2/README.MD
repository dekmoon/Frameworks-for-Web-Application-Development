
# Отчет по лабораторной работе №2: HTTP-запросы и шаблонизация в Laravel

## Цель работы

Изучить основные принципы работы с HTTP-запросами в Laravel и шаблонизацию с использованием Blade на примере веб-приложения To-Do App для команд.

## Выполненные задания

### 1. Подготовка к работе и установка Laravel

- **Создание проекта Laravel:**  
  Выполнил команду для создания нового проекта:
  ```bash
  composer create-project laravel/laravel:^10 todo-app
  ```
- **Запуск встроенного сервера:**  
  Запустил сервер для локальной разработки:
  ```bash
  php artisan serve
  ```
- **Результат:**  
  В браузере на странице `http://localhost:8000` отображается стартовая страница Laravel, что подтверждает успешную установку.

### 2. Настройка окружения

- **Изменение файла `.env`:**  
  Настроил основные параметры приложения:
  ```ini
  APP_NAME=ToDoApp
  APP_ENV=local
  APP_DEBUG=true
  APP_URL=http://localhost:8000
  ```
- **Генерация ключа приложения:**  
  Сгенерировал ключ для шифрования данных:
  ```bash
  php artisan key:generate
  ```
- **Вопрос:**  
  Если данный ключ попадет в руки злоумышленника, он сможет расшифровать конфиденциальные данные приложения.

### 3. Основы работы с HTTP-запросами

#### 3.1. Создание маршрутов для главной страницы и страницы "О нас"

- **Создание контроллера `HomeController`:**  
  Создал контроллер для обработки запросов главной страницы:
  ```bash
  php artisan make:controller HomeController
  ```
- **Методы контроллера:**
  ```php
  // app/Http/Controllers/HomeController.php
  public function index()
  {
      return view('home');
  }

  public function about()
  {
      return view('about');
  }
  ```
- **Маршруты в `routes/web.php`:**
  ```php
  Route::get('/', [HomeController::class, 'index'])->name('home');
  Route::get('/about', [HomeController::class, 'about'])->name('about');
  ```

#### 3.2. Создание маршрутов для задач

- **Создание контроллера `TaskController`:**  
  Создал контроллер для управления задачами:
  ```bash
  php artisan make:controller TaskController
  ```
- **Методы контроллера:**
  ```php
  // app/Http/Controllers/TaskController.php
  namespace App\Http\Controllers;

  use Illuminate\Http\Request;

  class TaskController extends Controller
  {
      public function index()
      {
          $tasks = $this->getTasks();
          return view('tasks.index', ['tasks' => $tasks]);
      }

      public function show($id)
      {
          $task = $this->getTask($id);
          return view('tasks.show', ['task' => $task]);
      }

      private function getTasks()
      {
          return [
              [
                  'id' => 1,
                  'title' => 'Первая задача',
                  'description' => 'Описание первой задачи',
                  'status' => 'выполнена',
                  'priority' => 'высокий',
                  'assigned_to' => 'Иван Иванов'
              ],
              [
                  'id' => 2,
                  'title' => 'Вторая задача',
                  'description' => 'Описание второй задачи',
                  'status' => 'не выполнена',
                  'priority' => 'средний',
                  'assigned_to' => 'Петр Петров'
              ],
          ];
      }

      private function getTask($id)
      {
          $tasks = $this->getTasks();
          foreach ($tasks as $task) {
              if ($task['id'] == $id) {
                  return $task;
              }
          }
          return null;
      }
  }
  ```
- **Ресурсный маршрут:**
  ```php
  Route::resource('tasks', TaskController::class);
  ```
- **Вопрос:**  
  Ресурсный контроллер автоматически создает маршруты для всех операций CRUD, что упрощает настройку и улучшает читаемость кода.

### 4. Шаблонизация с использованием Blade

#### 4.1. Создание макета страницы

- **Создание макета `layouts/app.blade.php`:**  
  Макет с общими элементами страницы:
  ```php
  <!DOCTYPE html>
  <html lang="ru">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>@yield('title', 'ToDoApp')</title>
      <link rel="stylesheet" href="{{ asset('css/app.css') }}">
  </head>
  <body>
      <header>
          <h1>{{ config('app.name') }}</h1>
          <nav>
              <ul>
                  <li><a href="{{ route('home') }}">Главная</a></li>
                  <li><a href="{{ route('about') }}">О нас</a></li>
                  <li><a href="{{ route('tasks.index') }}">Задачи</a></li>
              </ul>
          </nav>
      </header>
      <main>
          @yield('content')
      </main>
  </body>
  </html>
  ```

#### 4.2. Использование шаблонов Blade

- **Главная страница `home.blade.php`:**
  ```php
  @extends('layouts.app')

  @section('title', 'Главная')

  @section('content')
      <h2>Добро пожаловать в ToDoApp для команд</h2>
      <p>Управляйте задачами вашей команды эффективно.</p>
      <p>Этот инструмент поможет вам отслеживать статус и приоритет задач, а также назначать их участникам команды.</p>
  @endsection
  ```

- **Страница "О нас" `about.blade.php`:**
  ```php
  @extends('layouts.app')

  @section('title', 'О нас')

  @section('content')
      <h2>О нашем приложении ToDoApp</h2>
      <p>ToDoApp — это приложение для управления задачами внутри команды, аналогичное системе Github Issues.</p>
      <p>Наше приложение позволяет назначать задачи участникам команды, отслеживать их статус и приоритет.</p>
  @endsection
  ```

- **Список задач `tasks/index.blade.php`:**
  ```php
  @extends('layouts.app')

  @section('title', 'Список задач')

  @section('content')
      <h2>Задачи</h2>
      <ul>
          @foreach ($tasks as $task)
              <li>
                  <a href="{{ route('tasks.show', $task['id']) }}">{{ $task['title'] }}</a> - {{ $task['status'] }}
              </li>
          @endforeach
      </ul>
  @endsection
  ```

- **Отображение задачи `tasks/show.blade.php`:**
  ```php
  @extends('layouts.app')

  @section('title', 'Детали задачи')

  @section('content')
      <h2>{{ $task['title'] }}</h2>
      <p><strong>Описание:</strong> {{ $task['description'] }}</p>
      <p><strong>Статус:</strong> {{ $task['status'] }}</p>
      <p><strong>Приоритет:</strong> {{ $task['priority'] }}</p>
      <p><strong>Назначено:</strong> {{ $task['assigned_to'] }}</p>
  @endsection
  ```

### 5. Стилизация страниц

- **Создание CSS-файла `public/css/app.css`:**
  ```css
  body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f4f4f9;
  }

  header {
      background-color: #2c3e50;
      padding: 10px;
      color: #ecf0f1;
      border-bottom: 1px solid #34495e;
  }

  nav ul {
      list-style: none;
      padding: 0;
  }

  nav li {
      display: inline;
      margin-right: 10px;
  }

  nav a {
      color: #ecf0f1;
      text-decoration: none;
  }

  main {
      margin-top: 20px;
  }
  ```

## Контрольные вопросы:

**1)Что такое ресурсный контроллер в Laravel?**

Ресурсный контроллер в Laravel - это специальный тип контроллера, который автоматически обрабатывает типичные действия CRUD (Create, Read, Update, Delete) для определенного "ресурса" (например, статьи, пользователи, продукты). Он предоставляет заранее определенные методы для каждой из этих операций, что значительно упрощает и ускоряет разработку.

**Какие маршруты он создает?**

При использовании ресурсного контроллера Laravel автоматически создает следующие семь маршрутов, соответствующие стандартным операциям CRUD:

| HTTP-метод | URI                 | Действие    | Имя маршрута       |
|------------|----------------------|-------------|--------------------|
| GET        | `/resource`         | `index`     | `resource.index`   |
| GET        | `/resource/create`  | `create`    | `resource.create`  |
| POST       | `/resource`         | `store`     | `resource.store`   |
| GET        | `/resource/{resource}` | `show`      | `resource.show`    |
| GET        | `/resource/{resource}/edit` | `edit`      | `resource.edit`    |
| PUT/PATCH  | `/resource/{resource}` | `update`    | `resource.update`  |
| DELETE     | `/resource/{resource}` | `destroy`   | `resource.destroy` |

**Примечание:** `resource` в приведенной выше таблице следует заменить фактическим именем вашего ресурса (например, `posts`, `users`). `{resource}` - это идентификатор конкретного экземпляра ресурса.

**2)Объясните разницу между ручным созданием маршрутов и использованием ресурсного контроллера.**

| Характеристика             | Ручное создание маршрутов                               | Ресурсный контроллер                                    |
|---------------------------|--------------------------------------------------------|-------------------------------------------------------|
| Определение маршрутов     | Явное определение каждого маршрута в файле `routes/web.php` | Автоматическое создание стандартных CRUD-маршрутов |
| Код                      | Больше кода, особенно для CRUD-операций                  | Меньше кода, более лаконичный и читаемый               |
| Время разработки           | Больше времени на определение и поддержку маршрутов   | Меньше времени, быстрее разработка                     |
| Гибкость                  | Полный контроль над именами и поведением маршрутов     | Меньшая гибкость, привязка к стандартной структуре     |
| Подходит для             | Нестандартные API, сложные маршруты                     | Стандартные CRUD-приложения, RESTful API           |

**Вывод:**

*   **Ручное создание маршрутов:** Дает полную гибкость, но требует больше кода и усилий.
*   **Ресурсный контроллер:** Значительно упрощает разработку для стандартных CRUD-операций, сокращает количество кода и повышает читаемость.

**3)Какие преимущества предоставляет использование анонимных компонентов Blade?**

Анонимные компоненты Blade предоставляют следующие преимущества:

*   **Простота:** Не требуют создания отдельных классов, что упрощает структуру проекта и уменьшает количество файлов.
*   **Лаконичность:** Определяются непосредственно в Blade-шаблонах, что делает код более компактным и читаемым.
*   **Подходят для небольших компонентов:** Идеально подходят для небольших, повторно используемых элементов UI, которые не требуют сложной логики.
*   **Отсутствие накладных расходов:** Не имеют накладных расходов, связанных с созданием и управлением классом компонента.
*   **Улучшенная читаемость:** Размещение разметки и минимальной логики в одном файле улучшает читаемость.
* **Быстрое прототипирование:** Легко создавать и изменять UI элементы
* **Меньше кода:** Не нужен отдельный файл контроллера.
* **Снижение связности:** Анонимные компоненты могут существовать без сильной связности с классом контроллера.
* **Многоразовость:** Возможность переиспользования шаблона Blade.

**4)Какие методы HTTP-запросов используются для выполнения операций CRUD?**

Для выполнения операций CRUD используются следующие методы HTTP-запросов:

*   **Create (Создание):** `POST` - используется для создания нового ресурса.
*   **Read (Чтение):** `GET` - используется для получения (чтения) ресурса.
    *   `GET /resource` - получение списка ресурсов (index).
    *   `GET /resource/{id}` - получение конкретного ресурса по ID (show).
*   **Update (Обновление):**
    *   `PUT` - используется для полной замены ресурса.
    *   `PATCH` - используется для частичного обновления ресурса.
*   **Delete (Удаление):** `DELETE` - используется для удаления ресурса.
### Заключение

В ходе выполнения лабораторной работы я изучил основные принципы работы с HTTP-запросами и шаблонизацию в Laravel. Реализовал приложение To-Do App для команд с использованием контроллеров, маршрутов и шаблонов Blade. Приложение теперь позволяет создавать и просматривать задачи с детальной информацией на русском языке.

